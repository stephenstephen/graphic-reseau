//
//  Variables
//  --------------------------------------------
@amrma-icon__chat_triangle_left: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEiIGhlaWdodD0iMjIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEwLjUgMjEuNUwuMzI3IDMuMTlDLS41MzUgMS42MzUuOTA0LS4xODggMi42MTUuMjkxTDEwLjUgMi41djE5eiIgZmlsbD0iI0UxRjVGRSIvPjwvc3ZnPg==');
@amrma-icon__chat_triangle_right: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEiIGhlaWdodD0iMjIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTAgMjEuNUwxMC4xNzIgMy4xOWMuODYzLTEuNTU0LS41NzYtMy4zNzctMi4yODctMi44OThMMCAyLjV2MTl6IiBmaWxsPSIjRUNFRUZGIi8+PC9zdmc+');
@amrma-icon__attach_file: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0zLjM5NiAxNmEzLjMzMiAzLjMzMiAwIDAgMS0yLjM5My0xLjAzNUEzLjU2NSAzLjU2NSAwIDAgMSAwIDEyLjQ5MmEzLjMxOCAzLjMxOCAwIDAgMSAuOTIyLTIuMzE4bC4xNC0uMTQ3TDkuNTU4IDEuMjVBNC4wNzkgNC4wNzkgMCAwIDEgMTIuNTExIDBjMS4xMzYtLjAwMSAyLjI4Ny40NjMgMy4xNjUgMS4zN0E0LjcwNyA0LjcwNyAwIDAgMSAxNyA0LjYzNmE0LjM2NCA0LjM2NCAwIDAgMS0xLjIxIDMuMDVsLTcuMTMyIDcuMzctLjUzMS41NDgtMS4wNi0xLjA5N0wxNC43MyA2LjU5Yy41MTMtLjUzLjc2OC0xLjIyNi43Ny0xLjk1M2EzLjEzIDMuMTMgMCAwIDAtLjg4Ni0yLjE3MSAyLjkzMiAyLjkzMiAwIDAgMC0yLjEwMy0uOTE1IDIuNTk5IDIuNTk5IDAgMCAwLTEuODkuNzk1TDEuOTg0IDExLjI3Yy0uMzIyLjMzMi0uNDguNzYzLS40ODIgMS4yMjIgMCAuNDg1LjE4My45ODYuNTYyIDEuMzc3LjM3OS4zOS44NjIuNTggMS4zMzIuNThhMS42MzUgMS42MzUgMCAwIDAgMS4xODQtLjQ5Nmw2LjUxNC02LjczYS42NTUuNjU1IDAgMCAwIC4xODItLjQ3LjguOCAwIDAgMC0uMjI5LS41NTYuNzQ1Ljc0NSAwIDAgMC0uNTM4LS4yMzYuNjIuNjIgMCAwIDAtLjQ1My4xODhsLTUuNTQgNS43MjQtMS4wNjItMS4wOTYgNS41NC01LjcyNGMuNDE2LS40MzIuOTctLjY0NiAxLjUxNS0uNjQ0LjU3OCAwIDEuMTYuMjM2IDEuNi42OTEuNDQuNDU2LjY3IDEuMDU2LjY3IDEuNjU0IDAgLjU2LS4yMDcgMS4xMzQtLjYyMyAxLjU2NEw1LjY0IDE1LjA0OUEzLjEwNCAzLjEwNCAwIDAgMSAzLjQwMiAxNmgtLjAwNnoiIGZpbGw9IiMxOTc5QzMiLz48L3N2Zz4=');
@amrma-icon__attach_file_big: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjkiIGhlaWdodD0iMjciIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik01Ljc5MyAyN2MtMS40Ny4wMDItMi45NTMtLjU5Mi00LjA4My0xLjc0N0E1Ljk4MiA1Ljk4MiAwIDAgMSAwIDIxLjA4MWE1LjU2OCA1LjU2OCAwIDAgMSAxLjU3My0zLjkxMmwuMjQtLjI0OEwxNi4zMDQgMi4xMDlBNi45OTYgNi45OTYgMCAwIDEgMjEuMzQyIDBjMS45MzgtLjAwMiAzLjkwMi43OCA1LjM5OSAyLjMxQTcuODk4IDcuODk4IDAgMCAxIDI5IDcuODI1Yy4wMDMgMS44NjgtLjY4MyAzLjczOC0yLjA2NCA1LjE0OUwxNC43NyAyNS40MDlsLS45MDYuOTI1LTEuODEtMS44NTFMMjUuMTI4IDExLjEyYy44NzYtLjg5NSAxLjMxMS0yLjA3IDEuMzEzLTMuMjk3IDAtMS4yOTYtLjUtMi42My0xLjUxLTMuNjYzLTEuMDEzLTEuMDM1LTIuMzE2LTEuNTQzLTMuNTg4LTEuNTQ0YTQuNDU3IDQuNDU3IDAgMCAwLTMuMjI0IDEuMzQzTDMuMzg0IDE5LjAxOGMtLjU0OS41Ni0uODIgMS4yODctLjgyMiAyLjA2My4wMDIuODE4LjMxMyAxLjY2My45NiAyLjMyMy42NDUuNjU3IDEuNDcuOTc4IDIuMjcxLjk4YTIuODA0IDIuODA0IDAgMCAwIDIuMDItLjgzOWwxMS4xMTItMTEuMzU3Yy4yMDgtLjIxMy4zMS0uNDgyLjMxMS0uNzkxIDAtLjMyNi0uMTI0LS42NjYtLjM5MS0uOTRhMS4yNzggMS4yNzggMCAwIDAtLjkxOC0uMzk4IDEuMDYzIDEuMDYzIDAgMCAwLS43NzMuMzE4bC05LjQ1IDkuNjU4LTEuODEyLTEuODQ4IDkuNDUyLTkuNjZhMy41OCAzLjU4IDAgMCAxIDIuNTgzLTEuMDg2Yy45ODYgMCAxLjk3OC4zOTcgMi43MyAxLjE2NmEzLjk5OSAzLjk5OSAwIDAgMSAxLjE0MSAyLjc5IDMuNzcxIDMuNzcxIDAgMCAxLTEuMDYxIDIuNjRMOS42MiAyNS4zOTRBNS4zMjMgNS4zMjMgMCAwIDEgNS44MDMgMjdoLS4wMXoiIGZpbGw9IiM4MjgyODIiLz48L3N2Zz4=');
@amrma-icon__select_arrow: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTE3IDFMOSA5IDEgMSIgc3Ryb2tlPSIjMzMzIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvc3ZnPg==');
@amrma-icon__delete: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAzNiAzNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTM1LjkxOCAyLjcxNEwzMy4yMDMgMCAxOC40MTggMTQuNzg3IDMuNjMzIDAgLjkxOCAyLjcxMyAxNS43MDUgMTcuNS45MiAzMi4yODcgMy42MzMgMzVsMTQuNzg1LTE0Ljc4NiAxNC43ODUgMTQuNzg1IDIuNzExLTIuNzEzTDIxLjEzMSAxNy41IDM1LjkxOCAyLjcxNCIgZmlsbD0iIzAwNmJiNCIvPjwvc3ZnPg==');
@amrma-btn__color_blue: #1979c3;
@amrma-color__grey: #ebeef5;

& when (@media-common = true) {
    .amrma-chat-container {
        box-sizing: border-box;
        min-height: 400px;
        background: #f9f9fc;
        border: 1px solid @amrma-color__grey;
        border-radius: 0 0 10px 10px;
    }

    .amrma-chat-block {
        & {
            display: flex;
            flex-direction: column;
            overflow-y: hidden;
            min-height: 270px;
            max-height: 270px;
            padding-right: 5px;
            margin: 30px 20px 20px;
        }

        &:hover {
            overflow-y: scroll;
            padding-right: 0;
        }

        &::-webkit-scrollbar-track {
            border-radius: 3px;
        }

        &::-webkit-scrollbar {
            width: 5px;
        }

        &::-webkit-scrollbar-thumb {
            border-radius: 4px;
            background: #c5c5c5;
        }
    }

    .amrma-message-block {
        & {
            position: relative;
            display: flex;
            flex-direction: column;
            padding: 15px 20px 10px;
            border-radius: 10px;
        }

        &:before {
            position: absolute;
            top: 15px;
            width: 11px;
            height: 22px;
            content: '';
        }

        .amrma-message {
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .amrma-date {
            align-self: flex-end;
            margin: 0;
            padding: 0;
            color: #999;
            font-size: 12px;
        }

        .amrma-image {
            width: auto;
            height: auto;
            max-width: 225px;
            margin: 0;
            padding: 0;
        }

        .amrma-chat-message.-left & {
            & {
                background: #e2f5fe;
            }

            &:before {
                left: -11px;
                .lib-css(background, @amrma-icon__chat_triangle_left);
            }
        }

        .amrma-chat-message.-right & {
            & {
                background: #eceeff;
            }

            &:before {
                right: -11px;
                .lib-css(background, @amrma-icon__chat_triangle_right);
            }
        }
    }

    .amrma-chat-message {
        & {
            margin: 5px 20px;
            max-width: 80%;
        }

        &.-default {
            display: none;
        }

        &.-left {
            align-self: flex-start;
        }

        &.-right {
            & {
                align-self: flex-end;
            }

            .amrma-username {
                text-align: right;
            }
        }

        .amrma-username {
            margin-bottom: 5px;
            color: #777;
        }

        .amrma-delete-container {
            text-align: right;
        }
    }

    .amrma-message:before {
        position: absolute;
        width: 13px;
        height: 20px;
        content: '';
    }


    .amrma-chat-file {
        & {
            position: relative;
            padding-left: 25px;
        }

        &.-preview {
            display: flex;
            align-items: center;
            margin: 25px;
            padding-right: 20px;
            color: #006bb4;
        }

        &:before {
            position: absolute;
            top: 2px;
            left: 0;
            width: 17px;
            height: 16px;
            content: '';
            .lib-css(background-image, @amrma-icon__attach_file);
        }

        .amrma-file {
            font-weight: 600;
        }
    }

    .amrma-delete {
        display: inline-block;
        margin-left: 10px;
        width: 16px;
        height: 16px;
        background: @amrma-icon__delete;
        background-repeat: no-repeat;
        cursor: pointer;
    }

    .amrma-chat-send {
        & {
            position: relative;
            display: flex;
            align-items: flex-end;
            flex-basis: 100%;
            padding: 8px 0 8px 15px;
            border-radius: 2px;
            background: #fff;
        }

        .amrma-textarea {
            flex-basis: 80%;
            margin-left: 25px;
            max-height: 250px;
            min-height: 40px;
            border: none;
            resize: none;
            line-height: 30px;
        }

        .amrma-hiddentext {
            position: absolute;
            visibility: hidden;
            opacity: 0;
            white-space: pre-wrap;
            line-height: 30px;
        }

        .amrma-send {
            & {
                margin-left: 10px;
                padding: 12px 16px;
                border: 1px solid @amrma-btn__color_blue;
                border: none;
                border-radius: 3px;
                color: #fff;
                background: @amrma-btn__color_blue;
                transition: background-color .4s;
                font-weight: bold;
            }

            &:hover {
                border: none;
                background: #2196f3;
                color: #fff;
            }
        }
    }

    .amrma-chat-notification {
        & {
            display: flex;
            margin: 5px 0 5px 20px;
        }

        .amrma-notification {
            margin-right: 15px;
            font-weight: 600;
            font-size: 14px;
        }

        .amrma-date {
            line-height: 19px;
        }
    }

    .amrma-chat-comment {
        margin: 0 auto;
        padding: 125px 0;
        color: #999;
    }

    .amrma-attach-file {
        & {
            margin-top: 10px;
        }

        .amrma-chat-send & {
            width: 29px;
            height: 33px;
            margin: 0;
        }

        .amrma-attach {
            display: none;
        }

        .amrma-file {
            margin: 5px 0;
            padding-left: 20px;
            color: @amrma-btn__color_blue;
        }

        .amrma-label {
            & {
                position: relative;
                padding-left: 20px;
                font-weight: bold;
                font-size: 16px;
                cursor: pointer;
                color: @amrma-btn__color_blue;
                transition: color .3s ease;
            }

            &:hover {
                text-decoration: underline;
                color: #2196f3;
            }

            &:before {
                position: absolute;
                top: 0;
                left: 5px;
                width: 29px;
                height: 27px;
                content: '';
                background-image: @amrma-icon__attach_file_big;
            }
        }
    }

    .amrma-quick-reply {
        & {
            display: none;
            padding: 8px 0;
            flex-basis: 20%;
            border-bottom: 1px solid @amrma-color__grey;
        }

        .amrma-select {
            box-sizing: border-box;
            padding: 12px 50px 13px 20px;
            min-width: 250px;
            width: 100%;
            border: none;
            background: #fff @amrma-icon__select_arrow no-repeat 100% 45%;
            background-position: right 15px bottom 45%;
            -webkit-appearance: none;
            -moz-appearance: none;
            -ms-appearance: none;
            appearance: none;
        }
    }

    .amrma-chat-control {
        margin: 0 20px;
        padding: 0 10px;
        border-radius: 2px;
        background: #fff;

        &.with-quick-reply {
            .amrma-quick-reply {
                display: block;
            }

            .amrma-chat-send {
                flex-basis: 80%;
            }
        }
    }
}

.media-width(@extremum, @break) when (@extremum = 'min') and (@break = @screen__xl) {
    .amrma-chat-control {
        display: flex;
    }

    .amrma-quick-reply {
        border-bottom: none;
        border-right: 1px solid @amrma-color__grey;
    }
}
